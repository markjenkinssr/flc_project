{% extends "base.html" %}
{% block title %}Request Access{% endblock %}

{% block content %}
<section aria-labelledby="ra-title">
  <h1 id="ra-title" class="mb-3">Request Access</h1>
  <p class="text-muted">If you’re not on the pre-approved list yet, send a request to staff.</p>

  <form method="post" novalidate aria-describedby="ra-help">
    {% csrf_token %}
    <div class="row g-3">
      <div class="col-md-6">
        <label for="{{ form.first_name.id_for_label }}" class="form-label">First Name</label>
        {{ form.first_name }}
        {% if form.first_name.errors %}<div class="text-danger small" role="alert">{{ form.first_name.errors }}</div>{% endif %}
      </div>
      <div class="col-md-6">
        <label for="{{ form.last_name.id_for_label }}" class="form-label">Last Name</label>
        {{ form.last_name }}
        {% if form.last_name.errors %}<div class="text-danger small" role="alert">{{ form.last_name.errors }}</div>{% endif %}
      </div>

      <div class="col-md-6">
        <label for="{{ form.student_organization.id_for_label }}" class="form-label">Student Organization</label>
        {{ form.student_organization }}
        {% if form.student_organization.errors %}<div class="text-danger small" role="alert">{{ form.student_organization.errors }}</div>{% endif %}
      </div>

      <div class="col-md-6">
        <label for="{{ form.college_company.id_for_label }}" class="form-label">College/Company</label>
        {{ form.college_company }}
        {% if form.college_company.errors %}<div class="text-danger small" role="alert">{{ form.college_company.errors }}</div>{% endif %}
      </div>

      <div class="col-md-6">
        <label for="{{ form.email.id_for_label }}" class="form-label">Email</label>
        {{ form.email }}
        {% if form.email.errors %}<div class="text-danger small" role="alert">{{ form.email.errors }}</div>{% endif %}
      </div>

      <div class="col-md-6">
        <label for="{{ form.phone.id_for_label }}" class="form-label">Cell (optional)</label>
        {{ form.phone }}
        {% if form.phone.errors %}<div class="text-danger small" role="alert">{{ form.phone.errors }}</div>{% endif %}
      </div>

      <div class="col-12">
        <label for="{{ form.message.id_for_label }}" class="form-label">Message (optional)</label>
        {{ form.message }}
        {% if form.message.errors %}<div class="text-danger small" role="alert">{{ form.message.errors }}</div>{% endif %}
      </div>
    </div>

    <p id="ra-help" class="form-text mt-2">
      We’ll email <em>studentorgs@mccb.edu</em> and staff will add you if appropriate.
    </p>

    {# hCaptcha (optional) — only render if a site key is provided in the view context #}
    {% if HCAPTCHA_SITE_KEY %}
      <div class="my-3">
        <div class="h-captcha" data-sitekey="{{ HCAPTCHA_SITE_KEY }}"></div>
      </div>
      <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
    {% endif %}

    <div class="mt-3">
      <button type="submit" class="btn btn-primary">Send Request</button>
      <a href="{% url 'registrations:user_access' %}" class="btn btn-link">Back</a>
    </div>
  </form>
</section>
{% endblock %}
